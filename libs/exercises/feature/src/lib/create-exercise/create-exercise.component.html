<main fxLayout="row nowrap"
      fxLayoutAlign="center">
  <section class="create-exercise"
           fxFlex="50%"
           fxFlex.xs="90%"
           fxFlex.sm="60%"
           fxFlex.md="75">
    <h3>Create New Exercise</h3>

    <form *ngIf="metaCollections$ | async as metaCollections"
          [formGroup]="exerciseForm">
      <mat-form-field appearance="outline">
        <input placeholder="Exercise name"
               matInput
               formControlName="name" />
      </mat-form-field>

      <div class="exercise-image-upload">
        <span>exercise thumbnail:</span>

        <img class="exercise-thumbnail mat-elevation-z3" />
      </div>

      <mat-form-field appearance="outline">
        <mat-select placeholder="Select Exercise Type"
                    formControlName="exerciseType">
          <mat-option *ngFor="let exerciseType of metaCollections['exercise-types'] | keyvalue; trackBy: trackByIndex"
                      [value]="exerciseType.key">{{ exerciseType.value }}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-select placeholder="Select target muscle"
                    formControlName="targetMuscle">
          <ng-container *ngFor="let muscle of metaCollections.muscles | keyvalue; trackBy: trackByIndex">
            <mat-option [value]="muscle.key">{{ muscle.value | titlecase }}</mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-select placeholder="Select Equipment"
                    formControlName="equipment">
          <mat-option *ngFor="let equipmentItem of metaCollections.equipment | keyvalue; trackBy: trackByIndex"
                      [value]="equipmentItem.key">{{ equipmentItem.value }}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <input placeholder="Cover image url"
               matInput
               formControlName="coverUrl" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <input placeholder="Avatar url"
               matInput
               formControlName="avatarUrl" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>Rating</mat-label>
        <input #rating
               type="number"
               step="0.1"
               formControlName="rating"
               matInput
               required>
      </mat-form-field>
      <mat-slider thumbLabel
                  [min]="0"
                  [max]="10"
                  [step]="0.1"
                  [value]="ratingControl?.value"
                  (change)="ratingChange($event.value)"></mat-slider>
      <mat-form-field appearance="outline">
        <textarea matInput
                  placeholder="Exercise short description"
                  formControlName="shortDescription"></textarea>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <textarea matInput
                  placeholder="Exercise long description"
                  formControlName="longDescription"></textarea>
      </mat-form-field>
      <button mat-raised-button
              color="warn"
              [disabled]="!exerciseForm.valid || !exerciseForm.dirty"
              (click)="onSave()">
        SAVE
      </button>
    </form>
  </section>
</main>
